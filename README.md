<div dir="rtl" align="center">

# ุชุณุช ููุณ ุฏุฑ Pytest ุจุฑุง ุขุฏูุฒุงุฏ !

</div>

<div dir="rtl" align="right">

Pytest ูุนุฑูู ุชุฑู ู ูุญุจูุจ ุชุฑู ฺฉุชุงุจุฎููู ุชุณุช ููุณ ูพุงุชูู ูุณุช ฺฉู ุชู ุงู ุตูุญู ูุฎูุงู ุจุง ฺฉูฺฉ ฺฏุฑูุชู ุงุฒ ฺูุฏู ููุจุน ุจู ุฒุจูู
ุขุฏู ุฒุงุฏ ุชุณุช ููุณ ุฏุฑ Pytest ุฑู ูพุด ุจุจุฑู!

## ูฺฺฏ ูุง ุงุตู

- ูพูุงฺฏู ุจุณ ูุณุช! (ฺฉ ุนุงููู ูพูุงฺฏู ูุฌูุฏ ุฏุงุฑู ฺฉู ูุชููู ุจู ุฑุงุญุช ุฑู PyTest ูุตุจ ฺฉูู)
- UnitTest ูุณุช ! (ุฌููุชุฑ ูฺฏู ฺุฑุง)
- ุฑุงูฺฉุงุฑ ูุง ุฌุฏุฏุด ุฏุฑ ูุญูู ุชุณุช ููุณุ ุจุงุนุซ ุดุฏู ุดูุง ููุท ุฑู ููุทู ุชูุฑฺฉุฒ ฺฉูุฏ ูู ุฏุฑ ูุญูู ููุดุชู!

ุจู ุงู ุชฺฉู ฺฉุฏ ูฺฏุงู ฺฉูุฏ:

</div>

<div dir="ltr" align="left">

```python

def test_create_company_without_arguments_should_fail(client) -> None:
    response = client.post(path=companies_url)
    assert response.status_code == 400
    assert json.loads(response.content) == {"name": ["This field is required."]}

```

</div>

<div dir="rtl" align="right">

ุงฺฏู ุญุช ุงุฒ Pytest ฺุฒ ูุฏููุฏ ู ููุท ุญุฏุงูู ุงุทูุงุนุงุช ุฏุฑููุฑุฏ ุชุณุช ููุณ (ู ููููู assert) ุจุฏููุฏุ ูุทูุฆูู ุงู ฺฉุฏ ุฑู ูุชูุฌู
ูุดุฏ!

## ุงูฺฉุงูุงุช Pytest ฺฉู ุฏุฑ ุขูุฏู ุจุงูุงุดูู ฺฉุงุฑ ูฺฉูู!

Fixture ๐ธ

Custom Marker ๐ธ

Parametrize ๐ธ

Skip ๐ธ

Xfail ๐ธ

## ุดุฑูุน ฺฉุงุฑ ุจุง Pytest

ุงููู ูฺฉุชู ุงูู ฺฉู ุงุณู ูุงู ูุง ุชุณุช ูุง ุจุงุฏ ุจุง test_ ุดุฑูุน ู ุง ุชููู ุจุดู!

ูฺฉุชู ุฏูู ุงูู ฺฉู Pytest ูุตุจ ุจุงุดู! ูพุณ ุจุง ุฏุณุชูุฑ ุฒุฑ ูุตุจุด ูฺฉูู:

`pip install -U pytest`

ุญุงูุง ูุฑุถ ฺฉูุฏ ุชู ูุงู `test_first.py` ฺฉุฏ ูุง ุฒุฑ ุฑู ุฏุงุฑู:

</div>

<div dir="ltr" align="left">

```python
def test_our_first_function() -> None:
    assert 1 == 2
```

</div>
<div dir="rtl" align="right">

ุจุฑุง ุงุฌุฑุง ุชุณุชููู ูุชููู ุชู Terminal ุง CMD ุจููุณู:


</div>

<div dir="ltr" align="left">

```
pytest .
```

</div>

<div dir="rtl" align="right">

ุงู ุฏุณุชูุฑ ุจุฑุง ูุง ููู ูุงู ูุง ุชุณุช ุชู ูพูุดู ูุนู ุฑู ุชุณุช ูฺฉูู! ฺฉู ุชู ุงู ููุฑุฏ ุจู ูุง ุงุฑูุฑ ูุดูู ูุฏู ฺูู ฺฉ ุจุฑุงุจุฑ ุฏู
ูุณุช :))

![](images/test_our_first_function.png "test_our_first_function")

ูู ุงฺฏู ูููู ฺฉุฏ ุฑู ุจู ฺฉุฏ ุฒุฑ ุชุบุฑ ุจุฏู:

</div>

<div dir="ltr" align="left">

```python
def test_our_first_function() -> None:
    assert 1 == 1
```

</div>
<div dir="rtl" align="right">


ูุชุฌู ุงูุทู ูุดู:

![](images/test_our_first_function2.png "test_our_first_function2")

ุญุงูุง ุฌููุชุฑ ุชูุถุญ ูุฏู ฺฉู ฺุทูุฑ ูุชููุฏ ุฎุฑูุฌ Pytest ุฑู ุจูุชุฑ ฺฉูุฏ ู ุจูููุฏุด :) ูุนูุง ุจุฒุงุฑุฏ ููุท ุจุงูุงุด ุขุดูุง ุจุดู.

## ุจุฑุฑุณ Unit tests ู Integration Tests

ุจุฒุงุฑุฏ ุจุง ฺฉ ูุซุงู ุดุฑูุน ฺฉูู. ูุฑุถ ฺฉูุฏ ฺฉ ุง ูพ ุง ุฏุงุฑู ฺฉู ูุฎูุงุฏ ฺูุฏ ุชุง ุนููุงุช ูุญุงุณุจุงุช ุฑู ุงูุฌุงู ุจุฏู ู ูุชุฌู ุฑู ุจู ูุง
ุจุฑฺฏุฑุฏููู. ุชู ุงู ุณุฑูุณ ููฺฉูู ุฏุชุง ุงุฒ ุฏุชุงุจุณ ุฎููุฏู ุจุดู ู ุดุงุฏ ูู ุชู ุฏุชุงุจุณ ููุดุชู ุจุดู.

ูุง ุชู Unit Tests ูุงู ู ุจุฎุด ูุง ฺฉูฺฺฉ ููุทู (Backend Logic) ฺฉุฏููู ุฑู ุชุณุช ูฺฉูู. ูุซูุง ุชู ุงู ูุซุงู ุงูู ุชูุงุจุน ฺฉู
ุนููุงุช ูุญุงุณุจุงุช ุฑู ุงูุฌุงู ูุฏู ุฑู ุชุณุช ูฺฉูู ู ุจุงุฏ ุฏูุช ฺฉูู ฺฉู ุงู ุชุณุช ุจุงุฏ ุชู ฺฉ ูุญุท ุงุฒููู ุง ุฌุฏุงุดุฏู ุงุชูุงู ุจูุชู...
ุนู ฺ ุ ุนู ุฏุชุง ูุฑูุฏุ ูุงู APIุ ุงุฑุชุจุงุท ุจุง ุฏุชุงุจุณ ููุดูู ุจุงุฏ ูุฑุถ ุจุดู ฺฉู ุฏุฑุณุช ฺฉุงุฑ ูฺฉูู (ู ุญุช ุฑูุชุงุฑุดูู ุฑู ุฌุนู
ฺฉูู) ุชุง ุจุชููู ูุทูุฆู ุจุดู ุฏููุง ููู ุจุฎุด ฺฉู ุชุณุช ูฺฉูู ฺฉุงุฑ ุฎูุฏุดู ุฏุฑุณุช ุงูุฌุงู ูุฏู!
(ุชู ูพุฑุงูุชุฑ ุจฺฏู ฺฉู ุจู ุงู ุฌุนู ฺฉุฑุฏูุ ูุงฺฉ ฺฉุฑุฏู ูฺฏู ฺฉู ุจุนุฏุง ุญุณุงุจ ุจุงูุงุด ฺฉุงุฑ ุฏุงุฑู!)

ูพุณ ุชู Unit Tests ูุง ุชุณุช ูฺฉูู ฺฉู ุชูุงุจุนโููู ุจุง ฺฉ ุณุฑ ูุฑูุฏ ูุดุฎุตุ ุญุชูุง ฺฉ ุณุฑ ุฎุฑูุฌ ูุดุฎุต ู ุฏุฑุณุช ุฏุงุดุชู ุจุงุดู!

ูู ุชู Integration Tests ูุงู ู ฺูุฏ ุจุฎุด ุฑู ุจุงูู ุชุณุช ูฺฉูู! ูุซูุง ูุงู API ู ูุงุฌฺฉ ุฑู ุจุงูู ุชุณุช ูฺฉููุ ุง ฺูุฏ ูุงุฌฺฉ ุฑู
ููุฒูุงู ุชุณุช ูฺฉููุ ุง ุชู ุชุณุช ูุงููู ุฏุชุงุจุณ ุฑู ูู ูุงุท ูฺฉูู!

## ุจุง ฺฉ ูพุฑูฺู ูุงูุน ุชุณุช ููุณ ุฑู ุงุฏ ุจฺฏุฑู!

ุจูุธุฑ ูู ุจูุชุฑู ุฑูุด ุจุฑุง ุงุฏฺฏุฑุ ฺฉุงุฑ ฺฉุฑุฏู ู ุงุฏ ฺฏุฑูุชู ุจุง ูพุฑูฺู ูุง ูุงูุน ูุณุช... ุจุฑุง ุงุฏฺฏุฑ ุชุณุช ูู ุณุน ูฺฉูู ุจุง ูพุฑูฺู
ูุง ูุงูุน ูพุด ุจุฑู ู ุงููู ูพุฑูฺูโููู ฺฉ ูพุฑูฺู ุฌูฺฏู ูุณุช! ุฎุจ ุดุงุฏ ุจฺฏุฏ ูุฎูุงุฏ ุชุณุช ููุณ ุจุง PyTest ุงุฏ ุจฺฏุฑุฏ ู ุนูุงูู ุง
ุจู ุงุฏฺฏุฑ ุฌูฺฏู ูุฏุงุฑุฏ(!) ุฎุจ ูุชููุฏ ุงู ุจุฎุด ุฑู ุฑุฏ ฺฉูุฏ ู ุจุฑุฏ ุจุฎุด ุจุนุฏ ูู ูุฑุงุฑ ูุณุช ุฎู ุจุง ุฌูฺฏู ุฏุฑฺฏุฑ ุจุดู... ููุท
ูุฎูุงู ฺฉู ุจุชููู ุงุฒุด ุจุฑุง ููุดุชู ฺฉ ูพุฑูฺู ูุงูุน ฺฉูฺฉ ุจฺฏุฑูุ ูพุณ ุงฺฏู ุฏุฑููุฑุฏ ุฌูฺฏู ุงุทูุงุนุงุช ุฏุงุฑุฏุ ุจุณุงุฑ ูพุดููุงุฏ ูฺฉูู ฺฉู
ุงู ุจุฎุด ุฑู ุงุฏุงูู ุจุฏุฏ...

ููููุทูุฑ ฺฉู ฺฏูุชู ุจุงุฏ ฺฉ ุญุฏุงูู ุฏุชุง ุฏุฑููุฑุฏ ุฌูฺฏู ุฏุงุดุชู ุจุงุดุฏ! ูพุณ ูู ุฎู ุฏุณุชูุฑุงุช ู ูุฑุงุญู ฺฉุงุฑ ุฑู ุชูุถุญ ููุฏู... ููุท ุชุชุฑ
ูุงุฑ ู ุฎูุงุตู ุจุงูู ูพุด ูุฑู.

ุฎุจ ุฏุฑ ุงููู ูุฏู ูุง ูพฺฉุฌ ูุง ุฌูฺฏู ู ุฌูฺฏู ุฑุณุช ูุฑููุฑฺฉ ุฑู ูุตุจ ูฺฉูู! (ุงฺฏู ุจูุฏ
ูุณุชุฏ [ุงูุฌุง](https://docs.djangoproject.com/en/4.1/topics/install/)
ู [ุงูุฌุง](https://www.django-rest-framework.org/tutorial/quickstart/) ุฑู ุจุฎููุฏ!)

ุจุนุฏ ุงุฒ ูุตุจ ุจุง ฺฉูฺฉ ุฏุณุชูุฑ `django-admin startproject sample_project` ฺฉ ูพุฑูฺู ูุณุงุฒู ู ุจุนุฏ ุงุฒ ููุฑุฏ ุจู ูพูุดู ูพุฑูฺูุ
ุฏุณุชูุฑ `python manage.py runserver` ุฑู ูุฒูู ุชุง ูพุฑูฺู ุงุฌุฑุง ุจุดู! ุฏุฑ ูุชุฌู ุงู ุงุชูุงู ูพุฑูฺู ุฑู
ุขุฏุฑุณ `http://localhost:8000` ุงุฌุฑุง ูุดู ู ูุชููุฏ ุงุฒ ุทุฑู ูุฑูุฑฺฏุฑุชูู ุจูุด ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ! (ุงฺฏู ูุดฺฉู ุฏุงุดุชุฏ ูุชููุฏ
ุงุฒ [ุงูุฌุง](https://docs.djangoproject.com/en/4.1/intro/tutorial01/) ุฑุงูููุง ุจฺฏุฑุฏ!)

ุจุนุฏ ุงุฒ ุงูู ูุงุฒู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ  `python manage.py startapp sample_app` ุงูู ฺฉ ุงูพ ุฌุฏุฏ ุจุณุงุฒู ฺฉู ุฏุฑ ูุชุฌู ุงูู ุฏุฑ ูพูุดู
ูพุฑูฺู ุจุฑุง ูุง ฺฉ ูพูุดู ุจุง ูุงู `sample_app` ุณุงุฎุชู ูุดู. ุนุจุฏ ุจุงุฏ ุชู ูุงู settings.py ุฏุฑ ูพูุดู ูพุฑูฺูุ ุงูพ ุฑู ุจู ูุณุช ุงูพ ูุง
ูพุฑูฺู(installed_apps) ุงุถุงูู ฺฉูู! (ุงฺฏู ูุดฺฉู ุฏุงุดุชุฏ ูุชููุฏ
ุงุฒ [ุงูุฌุง](https://docs.djangoproject.com/en/4.1/intro/tutorial02/) ุฑุงูููุง ุจฺฏุฑุฏ!)

ุฎุจ ุญุงูุง ูุชููู ุจุฑู ุชู ูพูุดู sample_app ู ูุงู `models.py` ุฑู ุจุงุฒ ฺฉูู ู ฺฉ ูุฏู ุจุณุงุฒู! ูุซูุง ูุฏู ุจุง ูุงู `SampleModel`
ฺฉู ฺฉ ุณุฑ ููุฏ ุฏุงุดุชู ุจุงุดู ู ุจุนุฏ ุงุฒ ุงูู ูุชููู ุจุง ุฏุณุชูุฑ `python manage.py makemigrations` ู `python manage.py migrate`
ูุฏู ุฑู ุจู ุฏุชุงุจุณ ุงุถุงูู ฺฉูู! (ุงฺฏู ูุดฺฉู ุฏุงุดุชุฏ ูุชููุฏ
ุงุฒ [ุงูุฌุง](https://docs.djangoproject.com/en/4.1/intro/tutorial02/) ุฑุงูููุง ุจฺฏุฑุฏ!)

ูพุณ ฺฉุฏ ูุง ูุงู model.py ูุดู:


</div>

<div dir="ltr" align="left">

```python
from django.db import models
from django.db.models import URLField
from django.utils.timezone import now


class Company(models.Model):
    class CompanyStatus(models.TextChoices):
        LAYOFFS = "Layoffs"
        HIRING_FREEZE = "Hiring Freeze"
        HIRING = "Hiring"

    name = models.CharField(max_length=30, unique=True)
    status = models.CharField(
        choices=CompanyStatus.choices, default=CompanyStatus.HIRING, max_length=30
    )
    last_update = models.DateTimeField(default=now, editable=True)
    application_link = URLField(blank=True)
    notes = models.CharField(max_length=100, blank=True)

    def __str__(self) -> str:
        return f"{self.name}"
```

</div>
<div dir="rtl" align="right">


ุฏุฑ ูุฑุญูู ุจุนุฏ ูุงุฒ ุฏุงุฑู ฺฉู ุณุฑุงูุงุฒุฑ ุจุณุงุฒู ูพุณ ูุงู `serializers.py`ููู ุจู ุงู ุตูุฑุช ูุดู:


</div>

<div dir="ltr" align="left">

```python

from rest_franework import serializers
from .models import Company


class CompanySerializer(serializers.ModelSerializer):
    class Meta:
        model = Company
        fields = ["ยกd" "status", "application_Link", "last_update", "notes"

```

</div>
<div dir="rtl" align="right">

ุฏุฑ ูุฑุญูู ุจุนุฏ ูู ุงุฒ ModelViewSet ุงุณุชูุงุฏู ูฺฉูู ุชุง ุฑุงุญุช API ูุง Add, Edit, View , List , Delete ุฑู ุจุฑุงููู ุงุฌุงุฏ ฺฉูู :)

ูพุณ ูุงู `views.py`ููู ุจู ุงู ุตูุฑุช ูุดู:

</div>

<div dir="ltr" align="left">

```python

class CompanyViewSet(ModelVievSet):
    serializer_class = CompanySerializer
    queryset = Company.objects.all().order_by("-last_update")
```

</div>
<div dir="rtl" align="right">

ุจู ุนููุงู ุขุฎุฑู ูุฑุญูู ูู ูุงู `urls.py` ุงูพโููู ุจู ุงู ุตูุฑุช ูุดู:

</div>

<div dir="ltr" align="left">

```python
from rest_franework import routers
from views import CompanyiewSet

companies_router = routers.DefaultRouter()
companiesูrouter.register("companies", vievset=CompanyViewSet, basename="companies")

```

</div>

<div dir="rtl" align="right">
ู ูุงู `urls.py` ุฏุฑ ูพูุดู ุงุตู ูพุฑูฺู ุจู ุงู ุตูุฑุช ูุดู:
</div>
<div dir="ltr" align="left">

```python
from django.contrib import adnin
from django.urls import path, include
from companies.urls import companies_router

urtpatterns = [
    path("admin/" *, adnin.site.urls),
    path("", include(companies_router.urls))
]
```

</div>

